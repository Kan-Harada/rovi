<html>

<head>
<script src="jquery.js" type="text/javascript"></script>
<script src="wsshare.js" type="text/javascript"></script>
<style type="text/css">
</style>
</head>

<body>
<p>Camera Gain<input class="shared" type="text" id="Gain"></input><button id="GainInc">+</button><button id="GainDec">-</button>

<script type="text/javascript">
var ws;
$(document).ready(function(){
	ws=new WsShare("ws://"+location.hostname+":5000",function(ws){
		$('.shared').each(function(){
			var target=$(this);
			var id=target.attr('id');
			var dat=localStorage.getItem(id);
			if(target.attr('type')=='checkbox') target.prop({'checked':dat});
			else target.val(dat);
			var sv={};
			sv[id]=dat;
			ws.sendObject(sv);
		});
		$('.shared').change(function(e){
			var id=$(e.target).attr('id');
			var sv={};
			sv[id]=$(e.target).val();
			ws.sendObject(sv);
			localStorage.setItem(id,sv[id]);
		});
		$('#GainInc').click(function(){
			var x=Math.ceil($('#Gain').val()*1.1)
			$('#Gain').val(x);
			ws.sendObject({Gain:x});
		});
		$('#GainDec').click(function(){
			var x=Math.ceil($('#Gain').val()*0.9)
			$('#Gain').val(x);
			ws.sendObject({Gain:x});
		});
	});
});

</script>
</html>
