# カメラキャリブレーション

カメラのRaw画像には歪があるため正確な測位のためにはRectify画像に変換しなければなりません。この変換を行うためには事前にカメラキャリブレションを実施することが必要です。YOODSでは独自の技術による高精度なキャリブレーションデータを、カメラと共にご提供しています。

## キャリブレーションデータのご提供方法
- YCAM1,2

	YCAM1-2では電子データ(CD-ROM)にてご提供します。データ形式はROSのメッセージのテキスト形式のYAMLファイルです。
- YCAM3

	YCAM3では内蔵ROM、および筐体へのラベル表示にてご提供します。
- その他カメラ

	筐体へのラベル表示および試験成績書(紙媒体)にてご提供します。

## キャリブレーションデータの確認
- YCAM1,2
- YCAM3
- その他カメラ

## キャリブレーションデータの設定

キャリブレーションデータの設定手順はカメラに毎に異なります。ご使用のカメラに応じた手順にて実施ください。
- YCAM1,2
- YCAM3
- その他カメラ

## ROSレベルの操作

RoVIでは/remap_nodeにてRectifyを行います。このノードはキャリブレーションデータをパラメータサーバから取得します。パラメータは下記書式となります。
~~~
remap:
  width: 640
  height: 480
  D: [0.09586000000000001, 0.0, 0.0, 0.0, 0.0]
  K: [1511.29203, 0.0, 339.88041,
      0.0, 1506.44056, 259.60377,
      0.0, 0.0, 1.0]
  R: [1.0, 0.0, 0.0,
      0.0, 1.0, 0.0,
      0.0, 0.0, 1.0]
  P: [1511.29203, 0.0, 339.88041, 0.0,
      0.0, 1506.44056, 259.60377, 0.0,
      0.0, 0.0, 1.0, 0.0]
~~~
- ROSのクセですが、：の後にはスペースが必要なので注意しましょう
- １行の文字数が長すぎるとエラーになるので、行列は複数行で入力しましょう